// Fixed lead-loader.min.js - stores config globally before loading main script
(()=>{
  const currentScript = document.currentScript;
  if (!currentScript) return console.error('lead-loader: currentScript not available');
  
  // Store config globally before loading async script
  window.__leadPixelConfig = {};
  [...currentScript.attributes].forEach(attr => {
    if (attr.name.startsWith('data-')) {
      window.__leadPixelConfig[attr.name.replace('data-', '')] = attr.value;
    }
  });
  
  const script = document.createElement('script');
  script.src = 'https://raw.githubusercontent.com/cmwjr92/lead-pixel/main/lead-catcher.js';
  script.defer = true;
  script.onerror = () => console.error('lead-loader: failed to load lead-catcher.js');
  document.head.appendChild(script);
})();
